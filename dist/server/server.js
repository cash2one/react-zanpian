!function(t){var e={},n={0:0};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(e){if(0!==n[e]){var r=require("./"+e+".server.js"),a=r.modules,o=r.ids;for(var i in a)t[i]=a[i];for(var u=0;u<o.length;u++)n[o[u]]=0}return Promise.all([])},r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="//localhost:4000/",r.oe=function(t){process.nextTick(function(){throw t})},r(r.s=39)}([function(t,e){t.exports=require("react")},function(t,e){t.exports=require("lodash/merge")},function(t,e,n){"use strict";n(7);var r=n(36),a=n.n(r);e.a=function(t){var e=t.url,n=void 0===e?"":e,r=t.method,o=void 0===r?"get":r,i=t.data,u=void 0===i?{}:i,c=t.headers,s={url:n,method:o,headers:void 0===c?{}:c};return"get"==o?(u._t=(new Date).getTime(),s.params=u):"post"==o&&(s.data=u),a()(s).then(function(t){return t&&t.data?[null,t.data]:["return none"]}).catch(function(t){return t&&t.response&&t.response.data?[t.response.data]:["return error"]})}},function(t,e,n){"use strict";e.a={api:{login:"http://www.ikanfan.com/api.php?s=home-search-login",playlist:function(t){var e=t.id;return"http://www.ikanfan.com/api.php?s=home-vod-playerJson-id-".concat(e,"-react-1")},player:function(t){var e=t.id,n=t.pid;return"http://www.ikanfan.com/api.php?s=home-vod-playerJson-id-".concat(e,"-pid-").concat(n)},detail:function(t){var e=t.id;return"http://www.ikanfan.com/api.php?s=home-search-reactDetail&q=".concat(e)},newsDetail:"http://www.ikanfan.com/api.php?s=home-news-readdetail-id-",week:function(t){var e=t.limit;return"http://www.ikanfan.com/api.php?s=home-search-reactWeek&limit=".concat(e)},top:function(t){var e=t.order,n=t.area,r=t.lz;return"http://www.ikanfan.com/api.php?s=home-search-reactlist&order=".concat(e).concat(n?"&area=".concat(n):"").concat(r?"&lz=".concat(r):"")},typelist:function(t){var e=t.id,n=void 0===e?3:e,r=t.mcid,a=void 0===r?"":r,o=t.area,i=void 0===o?"":o,u=t.year,c=void 0===u?"":u,s=t.letter,l=void 0===s?"":s,f=t.order,d=void 0===f?"addtime":f,p=t.limit,v=void 0===p?30:p,h=t.lz,m=void 0===h?"":h,y=t.page,w=void 0===y?1:y;return"http://www.ikanfan.com/api.php?s=home-vod-ajaxtype-id-".concat(n,"-mcid-").concat(a,"-area-").concat(i,"-year-").concat(c,"-letter-").concat(l,"-order-").concat(d,"-limit-").concat(v,"-lz-").concat(m,"-p-").concat(w)}}}},function(t,e){t.exports=require("react-router-dom")},function(t,e){t.exports=require("react-loadable")},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r,a=n(0),o=n.n(a),i=n(12),u=n.n(i),c=n(38),s=n.n(c);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=u()(s.a)(r=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,p(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(e,a["Component"]),function(t,e,n){e&&f(t.prototype,e),n&&f(t,n)}(e,[{key:"render",value:function(){var t=this.props.text,e=void 0===t?"正在加载中...":t;return o.a.createElement("div",null,o.a.createElement("span",{styleName:"loading"}),e)}}]),e}())||r},function(t,e,n){t.exports={debug:!1,host:"localhost",port:4e3,auth_cookie_name:"signin-cookie",class_scoped_name:"[hash:base64:8]",public_path:"//localhost:4000"}},function(t,e){t.exports=require("redux")},function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return l}),n.d(e,"d",function(){return f});var r=n(2),a=n(3);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function u(t){i(o,r,a,u,c,"next",t)}function c(t){i(o,r,a,u,c,"throw",t)}u(void 0)})}}function c(t){var e=t.accessToken;return function(t){t({type:"SAVE_ACCESS_TOKEN",accessToken:e})}}function s(t){var e=t.userinfo;return function(t){t({type:"SAVE_USERINFO",userinfo:e})}}function l(t){var e=t.username,n=t.password;return function(t){return new Promise(function(){var i=u(regeneratorRuntime.mark(function i(u,c){var s,l,f,d,p;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(r.a)({url:a.a.api.login,method:"post",data:{username:e,password:n,isJson:!0}});case 2:return s=i.sent,l=o(s,2),l[0],f=l[1],console.log(f),1===f.rcode?(t({type:"SAVE_USERINFO",userinfo:f.data}),u([null,f.data])):u([f.msg]),i.next=10,Object(r.a)({url:window.location.origin+"/sign/in",method:"post",data:{auth_sign:f.data.auth,userinfo:f.data}});case 10:d=i.sent,p=o(d,2),p[0],(f=p[1])&&f.success?u([null,!0]):u(["sign error"]);case 15:case"end":return i.stop()}},i,this)}));return function(t,e){return i.apply(this,arguments)}}())}}function f(){return function(t){return new Promise(function(){var t=u(regeneratorRuntime.mark(function t(e,n){var a,i,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(r.a)({url:window.location.origin+"/sign/out",method:"post"});case 2:a=t.sent,i=o(a,2),i[0],(u=i[1])&&u.success?e([null,!0]):e(["sign error"]);case 7:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}())}}},function(t,e){t.exports=require("express")},function(t,e){t.exports=require("react-redux")},function(t,e){t.exports=require("react-css-modules")},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(2),a=n(14);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}function c(t){var e=t.id,n=t.filter,o=void 0===n?{}:n;return function(t,n){return new Promise(function(){var c=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(t){u(o,r,a,i,c,"next",t)}function c(t){u(o,r,a,i,c,"throw",t)}i(void 0)})}}(regeneratorRuntime.mark(function u(c,f){var d,p,v,h,m,y;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return(d=Object(a.b)(n(),e)).loading=!0,d.filter=o,d.data||(d.data=[]),t({type:"SET_POSTS_LIST_BY_NAME",id:e,data:d}),p=(p=l(o))?"(".concat(p,")"):"",u.next=9,Object(r.a)({url:"http://admin.xiaoduyu.com/graphql",method:"post",data:{operationName:null,variables:{},query:"{\n          posts".concat(p,"{\n            _id\n            comment_count\n            content_html\n            title\n            topic_id{\n              _id\n              name\n            }\n            type\n            user_id{\n              _id\n              nickname\n              brief\n              avatar_url\n            }\n          }\n        }")}});case 9:v=u.sent,h=i(v,2),h[0],(m=h[1])&&m.data?(d.loading=!1,(y=m.data[Reflect.ownKeys(m.data)[0]])&&y.length>0&&(d.data=d.data.concat(s(y))),t({type:"SET_POSTS_LIST_BY_NAME",id:e,data:d}),c([null,d.data])):c(["loadPostList load failed"]);case 14:case"end":return u.stop()}},u,this)}));return function(t,e){return c.apply(this,arguments)}}())}}var s=function(t){var e=[];return t.map(function(t){var n=t.content_html.replace(/<[^>]+>/g,"");n.length>140&&(n=n.slice(0,140)+"..."),t.content_summary=n,e.push(t)}),e},l=function(t){var e=[];for(var n in t){var r="";switch(o(t[n])){case"string":r='"'+t[n]+'"';break;case"number":r=t[n];break;default:r=t[n]}e.push(n+":"+r)}return e.join(",")}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return u});var r=n(1),a=n.n(r),o={};function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case"SET_POSTS":return a()({},e.state,{});case"SET_POSTS_LIST_BY_NAME":var n=e.id,r=e.data;return t[n]=r,a()({},t,{});default:return t}}var u=function(t,e){return t.posts[e]?t.posts[e]:{}}},function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i});var r=n(1),a=n.n(r);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case"GET_DETAIL":var n=e.id,r=e.data;return t[n]=r,a()({},t,{});default:return t}}var i=function(t,e){return t.detail[e]?t.detail[e]:{}}},function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i});var r=n(1),a=n.n(r);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case"GET_PLAY_LIST":var n=e.id,r=e.data;return t[n]=r,a()({},t,{});default:return t}}var i=function(t,e){return t.playlist[e]?t.playlist[e]:{}}},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(2),a=n(15),o=n(3);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}function c(t){var e=t.id;return function(t,n){return new Promise(function(){var c=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(t){u(o,r,a,i,c,"next",t)}function c(t){u(o,r,a,i,c,"throw",t)}i(void 0)})}}(regeneratorRuntime.mark(function u(c,s){var l,f,d,p;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return(l=Object(a.b)(n(),e)).loading=!0,l.data||(l.data=[]),t({type:"GET_DETAIL",id:e,data:l}),u.next=6,Object(r.a)({url:o.a.api.detail({id:e}),method:"get"});case 6:f=u.sent,d=i(f,2),d[0],(p=d[1])&&p.status?(l.loading=!1,l.data=p.data,t({type:"GET_DETAIL",id:e,data:l}),c([null,l.data])):c(["detail failed"]);case 11:case"end":return u.stop()}},u,this)}));return function(t,e){return c.apply(this,arguments)}}())}}},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(2),a=n(16),o=n(3);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}function c(t){var e=t.id;return function(t,n){return new Promise(function(){var c=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(t){u(o,r,a,i,c,"next",t)}function c(t){u(o,r,a,i,c,"throw",t)}i(void 0)})}}(regeneratorRuntime.mark(function u(c,s){var l,f,d,p;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return(l=Object(a.b)(n(),e)).loading=!0,l.data||(l.data=[]),t({type:"GET_PLAY_LIST",id:e,data:l}),u.next=6,Object(r.a)({url:o.a.api.playlist({id:e}),method:"get"});case 6:f=u.sent,d=i(f,2),d[0],(p=d[1])&&p.status?(l.loading=!1,l.data=p.data,t({type:"GET_PLAY_LIST",id:e,data:l}),c([null,l.data])):c(["detail failed"]);case 11:case"end":return u.stop()}},u,this)}));return function(t,e){return c.apply(this,arguments)}}())}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return u});var r=n(1),a=n.n(r),o={};function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case"GET_WEEK":var n=e.id,r=e.data;return t[n]=r,a()({},t,{});default:return t}}var u=function(t,e){return t.week[e]?t.week[e]:{}}},function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i});var r=n(1),a=n.n(r);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case"GET_PLAYER":var n=e.id,r=e.data,o=e.pid;return t["".concat(n,"-").concat(o)]=r,a()({},t,{});default:return t}}var i=function(t,e,n){return t.player["".concat(e,"-").concat(n)]?t.player["".concat(e,"-").concat(n)]:{}}},function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i});var r=n(1),a=n.n(r);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case"GET_TOP":var n=e.order,r=e.data,o=e.area;return t["".concat(n,"-").concat(o)]=r,a()({},t,{});default:return t}}var i=function(t,e,n){var r="".concat(e,"-").concat(n);return t.top[r]?t.top[r]:{}}},function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i});var r=n(1),a=n.n(r);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case"GET_LIST":var n=e.id,r=e.data;return t[n]=r,a()({},t,{});default:return t}}var i=function(t,e){return t.list[e]?t.list[e]:{}}},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(2),a=n(21),o=n(3);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}function c(t){var e=t.order,n=t.area;return function(t,c){return new Promise(function(){var s=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(t){u(o,r,a,i,c,"next",t)}function c(t){u(o,r,a,i,c,"throw",t)}i(void 0)})}}(regeneratorRuntime.mark(function u(s,l){var f,d,p,v;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return(f=Object(a.b)(c(),e,n)).loading=!0,f.data||(f.data=[]),t({type:"GET_TOP",order:e,data:f,area:n}),u.next=6,Object(r.a)({url:o.a.api.top({order:e,area:n}),method:"get"});case 6:d=u.sent,p=i(d,2),p[0],(v=p[1])&&v.status?(f.loading=!1,f.data=v.data,t({type:"GET_TOP",order:e,data:f,area:n}),s([null,f.data])):s(["detail failed"]);case 11:case"end":return u.stop()}},u,this)}));return function(t,e){return s.apply(this,arguments)}}())}}},function(t,e){t.exports=require("prop-types")},function(t,e){t.exports=require("body-parser")},function(t,e){t.exports=require("react-router")},function(t,e){t.exports=require("react-document-meta")},function(t,e){t.exports=require("@babel/polyfill")},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(2),a=n(20),o=n(3);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}function c(t){var e=t.id,n=t.pid;return function(t,c){return new Promise(function(){var s=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(t){u(o,r,a,i,c,"next",t)}function c(t){u(o,r,a,i,c,"throw",t)}i(void 0)})}}(regeneratorRuntime.mark(function u(s,l){var f,d,p,v;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return(f=Object(a.b)(c(),e,n)).loading=!0,f.data||(f.data=[]),t({type:"GET_PLAYER",id:e,data:f,pid:n}),u.next=6,Object(r.a)({url:o.a.api.player({id:e,pid:n}),method:"get"});case 6:d=u.sent,p=i(d,2),p[0],(v=p[1])&&v.status?(f.loading=!1,f.data=v.data,t({type:"GET_PLAYER",id:e,data:f,pid:n}),s([null,f.data])):s(["detail failed"]);case 11:case"end":return u.stop()}},u,this)}));return function(t,e){return s.apply(this,arguments)}}())}}},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(2),a=n(19),o=n(3);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}function c(t){var e=t.id;return function(t,n){return new Promise(function(){var c=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(t){u(o,r,a,i,c,"next",t)}function c(t){u(o,r,a,i,c,"throw",t)}i(void 0)})}}(regeneratorRuntime.mark(function u(c,s){var l,f,d,p;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return(l=Object(a.b)(n(),e)).loading=!0,l.data||(l.data=[]),t({type:"GET_WEEK",id:e,data:l}),u.next=6,Object(r.a)({url:o.a.api.week({limit:1e3}),method:"get"});case 6:f=u.sent,d=i(f,2),d[0],(p=d[1])&&p.status?(l.loading=!1,l.data=p.data,t({type:"GET_WEEK",id:e,data:l}),c([null,l.data])):c(["weekLoad failed"]);case 11:case"end":return u.stop()}},u,this)}));return function(t,e){return c.apply(this,arguments)}}())}}},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(2),a=n(22),o=n(3);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}function c(t){var e=t.id,n=t.limit,c=t.order,s=t.day;return function(t,l){return new Promise(function(){var f=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(t){u(o,r,a,i,c,"next",t)}function c(t){u(o,r,a,i,c,"throw",t)}i(void 0)})}}(regeneratorRuntime.mark(function u(f,d){var p,v,h,m;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if((p=Object(a.b)(l(),e)).loading=!0,p.page?p.page+=1:p.page=1,!p.more){u.next=5;break}return u.abrupt("return");case 5:return p.data||(p.data=[]),t({type:"GET_LIST",id:e,data:p}),u.next=9,Object(r.a)({url:o.a.api.typelist({page:p.page,limit:n,order:c,day:s}),method:"get"});case 9:v=u.sent,h=i(v,2),h[0],(m=h[1])&&0===m.status?(p.loading=!1,p.data=p.data.concat(m.data),p.more=m.total===p.data.length,t({type:"GET_LIST",id:e,data:p}),f([null,p.data])):f(["detail failed"]);case 14:case"end":return u.stop()}},u,this)}));return function(t,e){return f.apply(this,arguments)}}())}}},function(t,e){t.exports=require("cookie-parser")},function(t,e){t.exports=require("compression")},function(t,e){t.exports=require("react-dom/server")},function(t,e){t.exports=require("redux-thunk")},function(t,e){t.exports=require("axios")},function(t,e){t.exports={iconfont:"_212HlsCL","icon-right":"_5WAlG3wI",test:"_13LiPfny"}},function(t,e){t.exports={loading:"_1QJkZdcH"}},function(t,e,n){n(28),t.exports=n(40)},function(t,e,n){var r=n(7);n(41),n(28),n(42)({generateScopedName:r.class_scoped_name,extensions:[".scss",".css"]}),n(46)},function(t,e){t.exports=require("@babel/register")},function(t,e){t.exports=require("css-modules-require-hook")},function(t,e){t.exports=require("path")},function(t,e){t.exports=require("ejs")},function(t,e){t.exports=require("redux-logger")},function(t,e,n){"use strict";n.r(e);n(43);var r=n(10),a=n.n(r),o=n(25),i=n.n(o),u=n(32),c=n.n(u),s=n(33),l=n.n(s),f=n(27),d=n.n(f),p=(n(44),n(0)),v=n.n(p),h=n(34),m=n.n(h),y=n(26),w=n(11),b=n(5),g=n.n(b),x=n(8),E=n(35),_=n.n(E),O=n(1),S=n.n(O),k={accessToken:"",userinfo:null};var P=n(14),T=n(19),j=n(15),R=n(16),A=n(20),N=n(21),q=n(22),L={user:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case"SAVE_ACCESS_TOKEN":return t.accessToken=e.accessToken,S()({},t,{});case"SAVE_USERINFO":return t.userinfo=e.userinfo,S()({},t,{});default:return t}},posts:P.a,week:T.a,detail:j.a,playlist:R.a,player:A.a,top:N.a,list:q.a},I={};for(var G in L)I[G]=S()({},L[G](),{});var D=I=JSON.stringify(I),C=Object(x.combineReducers)(L),M=(n(45),[_.a]);function Y(t){return Object(x.createStore)(C,t,Object(x.compose)(x.applyMiddleware.apply(void 0,M)))}var J,K,W,H=n(4),V=n(24),z=n.n(V),B=n(9),F=n(12),U=n.n(F),Q=n(37),Z=n.n(Q);function X(t){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function tt(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nt(t){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rt(t,e){return(rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function at(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ot=Object(w.connect)(function(t,e){return{userinfo:function(t){return t.user.userinfo||{}}(t)}},function(t){return{signOut:Object(x.bindActionCreators)(B.d,t)}})(J=U()(Z.a)((W=K=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==X(e)&&"function"!=typeof e?at(t):e}(this,nt(e).call(this,t))).signOut=n.signOut.bind(at(at(n))),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rt(t,e)}(e,v.a.Component),function(t,e,n){e&&et(t.prototype,e),n&&et(t,n)}(e,[{key:"signOut",value:function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(t){tt(o,r,a,i,u,"next",t)}function u(t){tt(o,r,a,i,u,"throw",t)}i(void 0)})}}(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.signOut();case 2:e=t.sent,n=$(e,2),n[0],n[1]?window.location.href="/":alert("退出失败");case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.props.userinfo;return v.a.createElement("header",null,v.a.createElement("nav",{className:"navbar fixed-top navbar-expand-md navbar-expand-lg navbar-dark bg-dark bd-navbar",styleName:"test"},v.a.createElement(H.NavLink,{className:"navbar-brand",exact:!0,to:"/"},"React同构脚手架"),v.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},v.a.createElement("span",{className:"navbar-toggler-icon"})),v.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarText"},v.a.createElement("ul",{className:"navbar-nav mr-auto"},v.a.createElement("li",{className:"nav-item"},v.a.createElement(H.NavLink,{className:"nav-link",exact:!0,to:"/"},"Home")),v.a.createElement("li",{className:"nav-item"},v.a.createElement(H.NavLink,{className:"nav-link",exact:!0,to:"/topics"},"Topics")),v.a.createElement("li",{className:"nav-item"},v.a.createElement(H.NavLink,{className:"nav-link",exact:!0,to:"/week"},"week"))),v.a.createElement("span",{className:"mt-2 mt-md-0"},v.a.createElement("ul",{className:"navbar-nav mr-auto"},v.a.createElement("li",{className:"nav-item"},v.a.createElement("span",{className:"nav-link"},t.nickname)),v.a.createElement("li",{className:"nav-item"},v.a.createElement("a",{className:"nav-link",href:"javascript:void(0)",onClick:this.signOut},"退出")))))))}}]),e}(),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(K,"propTypes",{userinfo:z.a.object.isRequired,signOut:z.a.func.isRequired}),J=W))||J)||J,it=n(6),ut=n(13);function ct(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}var st=function(t){var e=t.store;t.match;return new Promise(function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(t){ct(o,r,a,i,u,"next",t)}function u(t){ct(o,r,a,i,u,"throw",t)}i(void 0)})}}(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ut.a)({id:"home",filter:{sort_by:"create_at",deleted:!1,weaken:!1}})(e.dispatch,e.getState);case 2:n({code:200});case 3:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}())};function lt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ft(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}var dt=function(t){var e=t.store,n=t.match;return new Promise(function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(t){ft(o,r,a,i,u,"next",t)}function u(t){ft(o,r,a,i,u,"throw",t)}i(void 0)})}}(regeneratorRuntime.mark(function t(r,a){var o,i,u,c,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.params.id,t.next=3,Object(ut.a)({id:o,filter:{_id:o,deleted:!1,weaken:!1}})(e.dispatch,e.getState);case 3:i=t.sent,u=lt(i,2),c=u[0],s=u[1],c||0==s.length?r({code:404}):r({code:200});case 8:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}())},pt=n(17),vt=n(18),ht=n(29);function mt(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}var yt=function(t){var e=t.store,n=t.match;return new Promise(function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(t){mt(o,r,a,i,u,"next",t)}function u(t){mt(o,r,a,i,u,"throw",t)}i(void 0)})}}(regeneratorRuntime.mark(function t(r,a){var o,i,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.params,i=o.id,u=o.pid,t.next=3,Object(pt.a)({id:i})(e.dispatch,e.getState);case 3:return t.next=5,Object(vt.a)({id:i})(e.dispatch,e.getState);case 5:return t.next=7,Object(ht.a)({id:i,pid:u})(e.dispatch,e.getState);case 7:r({code:200});case 8:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}())};function wt(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}var bt=function(t){var e=t.store,n=t.match;return new Promise(function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(t){wt(o,r,a,i,u,"next",t)}function u(t){wt(o,r,a,i,u,"throw",t)}i(void 0)})}}(regeneratorRuntime.mark(function t(r,a){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.params.id,t.next=3,Object(pt.a)({id:o})(e.dispatch,e.getState);case 3:return t.next=5,Object(vt.a)({id:o})(e.dispatch,e.getState);case 5:r({code:200});case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}())},gt=n(30),xt=n(23);function Et(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}var _t=function(t){var e=t.store;t.match;return new Promise(function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(t){Et(o,r,a,i,u,"next",t)}function u(t){Et(o,r,a,i,u,"throw",t)}i(void 0)})}}(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(gt.a)({id:"weekList"})(e.dispatch,e.getState);case 2:return t.next=4,Object(xt.a)({order:"addtime",area:""})(e.dispatch,e.getState);case 4:return t.next=6,Object(xt.a)({order:"hits_month",area:"CN"})(e.dispatch,e.getState);case 6:return t.next=8,Object(xt.a)({order:"hits_month",area:"JP"})(e.dispatch,e.getState);case 8:n({code:200});case 9:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}())},Ot=n(31);function St(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}var kt=function(t){var e=t.store,n=t.match;return new Promise(function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(t){St(o,r,a,i,u,"next",t)}function u(t){St(o,r,a,i,u,"throw",t)}i(void 0)})}}(regeneratorRuntime.mark(function t(r,a){var o,i,u,c,s,l,f,d,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.params,i=o.id,u=void 0===i?"list":i,c=o.limit,s=void 0===c?20:c,l=o.order,f=void 0===l?"addtime":l,d=o.day,p=void 0===d?365:d,t.next=3,Object(Ot.a)({id:u,limit:s,order:f,day:p})(e.dispatch,e.getState);case 3:r({code:200});case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}())},Pt=function(t){var e=function(e,n){return t?v.a.createElement(e,n):v.a.createElement(H.Redirect,{to:"/sign-in"})},r=function(t,e){return v.a.createElement(t,e)},a=[{path:"/",exact:!0,head:ot,component:g()({loader:function(){return n.e(1).then(n.bind(null,64))},loading:function(){return v.a.createElement(it.a,null)}}),enter:e,loadData:st},{path:"/posts/:id",exact:!0,head:ot,component:g()({loader:function(){return n.e(2).then(n.bind(null,56))},loading:function(){return v.a.createElement(it.a,null)}}),enter:e,loadData:dt},{path:"/topics",exact:!0,head:ot,component:g()({loader:function(){return n.e(3).then(n.bind(null,57))},loading:function(){return v.a.createElement(it.a,null)}}),enter:e},{path:"/sign-in",exact:!0,component:g()({loader:function(){return n.e(4).then(n.bind(null,58))},loading:function(){return v.a.createElement(it.a,null)}}),enter:function(e,n){return t?v.a.createElement(H.Redirect,{to:"/"}):v.a.createElement(e,n)}},{path:"/week",head:ot,component:g()({loader:function(){return n.e(5).then(n.bind(null,62))},loading:function(){return v.a.createElement(it.a,null)}}),enter:r,loadData:_t},{path:"/bangumi/:id",head:ot,component:g()({loader:function(){return n.e(6).then(n.bind(null,59))},loading:function(){return v.a.createElement(it.a,null)}}),enter:r,loadData:bt},{path:"/play/:id/:pid",head:ot,component:g()({loader:function(){return n.e(7).then(n.bind(null,60))},loading:function(){return v.a.createElement(it.a,null)}}),enter:r,loadData:yt},{path:"/list",head:ot,component:g()({loader:function(){return n.e(8).then(n.bind(null,63))},loading:function(){return v.a.createElement(it.a,null)}}),enter:r,loadData:kt},{path:"**",head:ot,component:g()({loader:function(){return n.e(9).then(n.bind(null,61))},loading:function(){return v.a.createElement(it.a,null)}}),enter:r}];return{list:a,dom:function(){return v.a.createElement("div",null,v.a.createElement(H.Switch,null,a.map(function(t,e){return v.a.createElement(H.Route,{key:e,path:t.path,exact:t.exact,component:t.head})})),v.a.createElement(H.Switch,null,a.map(function(t,e){if(t.component)return v.a.createElement(H.Route,{key:e,path:t.path,exact:t.exact,component:function(e){return t.enter(t.component,e)}})})))}}},Tt=n(7);function jt(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}function Rt(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(t){jt(o,r,a,i,u,"next",t)}function u(t){jt(o,r,a,i,u,"throw",t)}i(void 0)})}}var At=a()();At.use(i.a.json()),At.use(i.a.urlencoded({extended:!0})),At.use(c()()),At.use(l()()),At.use(a.a.static("./dist/client")),At.use("/sign",function(){var t=a.a.Router();return t.post("/in",function(t,e){var n=t.body.userinfo;e.cookie(Tt.auth_cookie_name,n.nickname,{path:"/",httpOnly:!0,maxAge:2592e6}),e.send({success:!0})}),t.post("/out",function(t,e){e.clearCookie(Tt.auth_cookie_name),e.send({success:!0})}),t}()),At.get("*",function(){var t=Rt(regeneratorRuntime.mark(function t(e,n){var r,a,o,i,u,c,s,l,f,p,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Y(JSON.parse(D)),a=null,(o=e.cookies[Tt.auth_cookie_name]||"")&&(a={id:"001",nickname:o},r.dispatch(Object(B.b)({userinfo:a})),r.dispatch(Object(B.a)({accessToken:o}))),i=Pt(a),u=null,c=null,i.list.some(function(t){var n=Object(y.matchPath)(e.url.split("?")[0],t);if(n&&n.path)return u=t,c=n,!0}),s={code:200},function(){return new Promise(function(){var t=Rt(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.component.load(function(){var t=Rt(regeneratorRuntime.mark(function t(n){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.WrappedComponent.defaultProps.loadData,t.next=3,a({store:r,match:c});case 3:o=t.sent,e(o);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())},!u.loadData){t.next=13;break}return t.next=12,u.loadData({store:r,match:c});case 12:s=t.sent;case 13:return t.next=15,u.component.preload();case 15:l=i.dom,f=m.a.renderToString(v.a.createElement(w.Provider,{store:r},v.a.createElement(y.StaticRouter,{location:e.url,context:s},v.a.createElement(l,null)))),p=JSON.stringify(r.getState()).replace(/</g,"\\x3c"),h=d.a.renderAsHTML(),301==s.code?n.writeHead(301,{Location:s.url}):(n.status(s.code),n.render("../dist/server/index.ejs",{html:f,reduxState:p,meta:h})),n.end();case 21:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()),At.listen(Tt.port),console.log("server started on port "+Tt.port)}]);